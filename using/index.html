<!doctype html>
<html lang="en">
<head>
<title>Stardog 1.2.3 Docs: Query, Add, Remove, Search</title>
<script src="/js/libs/modernizr-2.6.2.min.js"></script>
<meta charset='utf-8'>
<meta http-equiv="X-Powered-By" content="DocPad v6.44.0"/>
<link  rel="stylesheet" href="/css/gumby.css" />
<!--     //a block for ipad, etc... might should go in meta -->
<body id="inner-doc" class="docs grid">

<div class="navbar" id="nav1">
<div class="row">
      <a class="toggle" gumby-trigger="#nav1 &gt; .row &gt; ul" href="#"><i class="icon-menu"></i></a>
      <h3 class="five columns logo">
        <a href="http://stardog.com/">
          <img style="max-width: 40%;" src="/img/logotype.png" gumby-retina="">
        </a>
      </h3>
      <ul class="seven columns">
        <li><a href="#">Chapters</a></li>
        <li>
          <a href="#">Related</a>
          <div class="dropdown">
            <ul>
              <li><a href="#">Item</a></li>
              <li><a href="#">Item</a></li>
              <li><a href="#">Item</a></li>
              <li>
                <a href="#">I HAVE STUFF NESTED UNDER ME</a>
                <div class="dropdown">
                  <ul>
                    <li><a href="">nested</a></li>
                    <li><a href="">nested</a></li>
                    <li><a href="">nested</a></li>
                  </ul>
                </div>
              </li>
              <li><a href="#">Item</a></li>
              <li><a href="#">Item</a></li>
              <li><a href="#">Item</a></li>
            </ul>
          </div>
        </li>
        <li><a href="#">Java API</a></li>
        <!-- <li class="field"><input class="search input" type="search" placeholder="Search"></li> -->
      </ul>
    </div>
  </div>

<div id="the-header">
  <div class="row valign">
    <div class="three columns">
      <h1><span id="title-masthead"><img src="/img/stardog-FLAT.png" style="max-width: 75%"/></span></h1>
      <div>
      <div class="medium rounded btn default pretty"><a href="http://stardog.com/dl">Download</a></div>
      <!-- <p><a href="http://twitter.com/stardog_db"><img src="http://clarkparsia.com/images/twitter.png"/></a></p> -->
      </div>
    </div>
    <div class="nine columns" id="header-quote">
      <p><strong>The string is a stark data structure and everywhere it is passed there is much duplication of process. It is a perfect vehicle for hiding information.</strong>&mdash;Alan Perlis, <cite>Epigrams in Programming</cite></p>
      <h1 class=""><span id="title-subhead">Query, Add, Remove, Search</span></h1>
      <p><em></em></p>
    </div>
  </div>
 <!-- <div class="row">
    <div class="three columns"></div>
    <div class="nine columns">

    </div>
  </div>
  -->
</div>

  <div id="the-content">
    <div class="row">
        <div class="three columns">
        
          <nav id="sidebar-nav-holder" class="vertical-nav" gumby-fixed="top|thefooter">
<h3 id="tochead">Contents</h3>
<div class="sidebar-nav">


<ul class="toc">
    
    <!-- [data-target='-->
        <li><a href="#sd-Querying-a-Database" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="#sd-Querying-a-Database">Querying a Database</a>
        <!-- <li><a href="#sd-Querying-a-Database" class="skiplink">Querying a Database</a> -->
            
                
<ul class="toc">
    
</ul>

            
        </li>
    
    <!-- [data-target='-->
        <li><a href="#sd-Adding-amp--Removing-Data" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="#sd-Adding-amp--Removing-Data">Adding &amp; Removing Data</a>
        <!-- <li><a href="#sd-Adding-amp--Removing-Data" class="skiplink">Adding &amp; Removing Data</a> -->
            
                
<ul class="toc">
    
</ul>

            
        </li>
    
    <!-- [data-target='-->
        <li><a href="#sd-Exporting-a-Database" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="#sd-Exporting-a-Database">Exporting a Database</a>
        <!-- <li><a href="#sd-Exporting-a-Database" class="skiplink">Exporting a Database</a> -->
            
                
<ul class="toc">
    
</ul>

            
        </li>
    
    <!-- [data-target='-->
        <li><a href="#sd-Searching" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="#sd-Searching">Searching</a>
        <!-- <li><a href="#sd-Searching" class="skiplink">Searching</a> -->
            
                
<ul class="toc">
    
</ul>

            
        </li>
    
</ul>

</div>
</nav>

<!--
          <nav id="sidebar-nav-holder" class="vertical-nav" gumby-fixed="top|[data-target='psd-templates']">
            <ul id="sidebar-nav">

                <li class="active">
                  <a href="#grid-fundamentals" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='grid-fundamentals']">Grid Fundamentals</a>
                </li>

                <li>
                  <a href="#basic-grid" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='basic-grid']">Basic Grid</a>
                </li>

                <li>
                  <a href="#hybrid-grid" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='hybrid-grid']">Hybrid Grid</a>
                </li>

                <li>
                  <a href="#pushing-columns" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='pushing-columns']">Pushing Columns</a>
                </li>

                <li>
                  <a href="#centered-columns" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='centered-columns']">Centered Columns</a>
                </li>

                <li>
                  <a href="#tiles" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='tiles']">Tiles</a>
                </li>

                <li>
                  <a href="#nested-grids" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='nested-grids']">Nested Grids</a>
                </li>

                <li>
                  <a href="#semantic-grids" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='semantic-grids']">Semantic Grids</a>
                </li>

                <li>
                  <a href="#psd-templates" class="skip" gumby-easing="easeOutQuad" gumby-duration="600" gumby-goto="[data-target='psd-templates']">PSD Templates</a>
                </li>

            </ul>
          </nav>
-->

        
        </div>
        <div class="nine columns"><p>While Stardog is a full-featured RDF database, its primary purpose is to
execute queries against RDF data which it has under direct
management.[^1] Stardog supports the
<a href="http://www.cambridgesemantics.com/2008/09/sparql-by-example">SPARQL</a>
query language, a W3C standard.</p>
<p>[^1]: This implies that Stardog will not retrieve data from the Web
or from any other network via HTTP URLs in order to query that data. If
you want to query data using Stardog, you must add that data to a new or
existing Stardog database. A future version of Stardog will
support <a href="http://weblog.clarkparsia.com/2011/03/07/sdq-information-integration-i%0An-the-real-world/">SDQ</a>, a distributed query system, that will lift this restriction.</p>
<h2 id="sd-Querying-a-Database">Querying a Database</h2>
<p>Stardog currently supports all of the <a href="http://www.w3.org/TR/sparql11-query/">SPARQL 1.1 Query
language</a>. Support is planned for
<a href="http://www.w3.org/TR/2012/PR-sparql11-update-20121108">SPARQL 1.1
Update</a> in a
future release. Stardog does not support SPARQL 1.1 federation (the
SERVICE keyword). Stardog also supports the <a href="http://www.w3.org/TR/2012/CR-sparql11-entailment-20121108/">OWL 2 Direct Semantics
entailment
regime</a>.</p>
<p>To execute a SPARQL query against a Stardog database, use the <code>query</code>
subcommand:</p>
<pre class="highlighted"><code class="sql">$ stardog query myDb "<span class="operator"><span class="keyword">select</span> * <span class="keyword">where</span> { ?s ?p ?o }<span class="string">"</span></span></code></pre>
<p>Detailed information on using the query command in Stardog can be found
on its <a href="/docs/man/query-execute.html">manpage</a></p>
<h2 id="sd-Adding-amp--Removing-Data">Adding &amp; Removing Data</h2>
<p>The most efficient way to load data into Stardog is at database creation
time. See the <a href="../admin/#create">Creating a Database</a> section for bulk
loading data at database creation time. To add data to an existing
Stardog database, use the <a href="/docs/man/data-add.html">add</a> command:</p>
<pre class="highlighted"><code class="haskell">$ stardog <span class="typedef"><span class="keyword">data</span> add myDatabase 1.rdf 2.rdf 3.rdf</span></code></pre>
<p>The optional arguments are <code>-f</code> (or <code>--format</code>) to specify the RDF
serialization type of the files to be loaded; if you specify the wrong
type, <code>add</code> will fail. If you don‘t specify a type, Stardog will try to
determine the type on its own based on the file extension. For example,
the files that have names ending with ’.ttl' will be parsed with Turtle
syntax. If you specify a type, then all the files being loaded must of
that same type.</p>
<p>If you want to add data to a named graph, specify it via the
<code>--graph-uri</code> or <code>-g</code> options.</p>
<p>To remove data from a Stardog database,
<a href="/docs/man/data-remove.html">remove</a> is used by specifying—</p>
<ol>
<li>one Named Graph, OR</li>
<li>one or more files containing RDF (in some recognized serialization
format, i.e., RDF/XML, Turtle, Trig), OR</li>
<li>one Named Graph and one or more RDF files.</li>
</ol>
<p>For example,</p>
<pre class="highlighted"><code class="ruby"><span class="variable">$ </span>stardog data remove -g <span class="symbol">http:</span>/<span class="regexp">/foo myDatabase</span></code></pre>
<p>will remove the named graph <code>http://foo</code> and all its triples from
<code>myDatabase</code>.</p>
<pre class="highlighted"><code class="haskell">$ stardog <span class="typedef"><span class="keyword">data</span> remove myDatabase 1.rdf</span></code></pre>
<p>will remove the triples in <code>1.rdf</code> from (the default graph of)
<code>myDatabase</code>.</p>
<pre class="highlighted"><code class="brainfuck"><span class="comment">$</span> <span class="comment">stardog</span> <span class="comment">data</span> <span class="comment">remove</span> <span class="literal">-</span><span class="comment">g</span> <span class="comment">http://foo</span> <span class="literal">-</span><span class="comment">f</span> <span class="comment">TURTLE</span> <span class="comment">myDatabase</span> <span class="comment">2</span>.<span class="comment">rdf</span> <span class="comment">3</span>.<span class="comment">rdf</span></code></pre>
<p>will remove the triples in the Turtle files <code>2.rdf</code> and <code>3.rdf</code> from the
named graph <code>http://foo</code> of <code>myDatabase</code>.</p>
<p>Strict or loose parsing may be set for the input payload by using
<code>--strict-parsing=TRUE|FALSE</code>.</p>
<h3>How Stardog Handles RDF Parsing</h3>
<p>RDF parsing in Stardog is strict: it requires typed RDF literals to
match their explicit datatypes, URIs to be well-formed, etc. In some
cases, strict parsing isn't ideal, so it may be disabled using the
<code>--strict-parsing=FALSE</code> to disable it.</p>
<p>However, even with strict parsing disabled, Stardog's RDF parser may
encounter parse errors from which it cannot recover. And loading data in
lax mode may lead to unexpected SPARQL query results. For example,
malformed literals (<code>"2.5"^^xsd:int</code>) used in filter evaluation may lead
to undesired results.</p>
<h2 id="sd-Exporting-a-Database">Exporting a Database</h2>
<p>To export data from a Stardog database back to RDF,
<a href="/docs/man/data-export.html">export</a> is used by specifying—</p>
<ol>
<li>the connection string of the database to export</li>
<li>the export format: <code>N-TRIPLES, RDFXML, TURTLE, TRIG</code>. default is
‘N-TRIPLES’— ‘TRIG’ must be used when exporting the entire database
if the database contains triples inside named graphs.</li>
<li>optionally, the URI of the named graph to export if you wish to
export a single named graph only.</li>
<li>the file to export to</li>
</ol>
<p>For example,</p>
<pre class="highlighted"><code class="brainfuck"><span class="comment">$</span> <span class="comment">stardog</span> <span class="comment">data</span> <span class="comment">export</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">format</span> <span class="comment">TURTLE</span> <span class="comment">myDatabase</span> <span class="comment">myDatabase_output</span>.<span class="comment">ttl</span>

<span class="comment">$</span> <span class="comment">stardog</span> <span class="comment">data</span> <span class="comment">export</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">graph</span>-<span class="comment">uri</span> <span class="comment">http://example</span>.<span class="comment">org/context</span> <span class="comment">myDatabase</span> <span class="comment">myDatabase_output</span>.<span class="comment">nt</span></code></pre>
<h2 id="sd-Searching">Searching</h2>
<p>Stardog includes an RDF-aware semantic search capability: it will index
RDF literals and supports information retrieval-style queries over
indexed data.</p>
<h3>Indexing Strategy</h3>
<p>The indexing strategy creates a “search document” per RDF literal. Each
document consists of the following fields: literal ID; literal value;
and contexts.</p>
<h3>Search in SPARQL</h3>
<p>We use the predicate <code>http://jena.hpl.hp.com/ARQ/property#textMatch</code> to
access the search index in a SPARQL query.</p>
<p>For example,</p>
<pre class="highlighted"><code class="ruby"><span class="constant">SELECT</span> <span class="constant">DISTINCT</span> <span class="number">?s</span> <span class="number">?s</span>core 
<span class="constant">WHERE</span> {
<span class="number">?s</span> <span class="number">?p</span> <span class="number">?l</span>.
( <span class="number">?l</span> <span class="number">?s</span>core ) &lt;<span class="symbol">http:</span>/<span class="regexp">/jena.hpl.hp.com/</span><span class="constant">ARQ</span>/property<span class="comment">#textMatch&gt; ( 'mac' 0.5 50 ). </span>
}</code></pre>
<p>This query selects the top 50 literals, and their scores, which match
‘mac’ and whose scores are above a threshold of 0.5. These literals are
then joined with the generic BGP <code>?s ?p ?l</code> to get the resources (?s)
that have those literals. Alternatively, you could use
<code>?s rdf:type ex:Book</code> if you only wanted to select the books which
reference the search criteria; you can include as many other BGP's as
you like to enhance your initial search results.</p>
<h3>Searching with the Command Line</h3>
<p>First, check out the CLI help for the
<a href="/docs/man/query-search.html">search</a> subcommand…I'll wait.</p>
<pre class="highlighted"><code class="erlang">$ stardog help <span class="keyword">query</span> search</code></pre>
<p>Okay, now let‘s do a search over the O’Reilly book catalog in RDF for
everything mentioning “html”:</p>
<pre class="highlighted"><code class="brainfuck"><span class="comment">$</span> <span class="comment">stardog</span> <span class="comment">query</span> <span class="comment">search</span> <span class="literal">-</span><span class="comment">q</span> <span class="comment">"html"</span> <span class="literal">-</span><span class="comment">l</span> <span class="comment">10</span> <span class="comment">catalog</span></code></pre>
<p>The results?</p>
<pre class="highlighted"><code class="smalltalk"><span class="class">Index</span>    <span class="class">Score</span>    <span class="class">Hit</span>
====================
<span class="number">0</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596527402.</span><span class="class">IP</span>
<span class="number">1</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596003166.</span><span class="class">IP</span>
<span class="number">2</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9781565924949.</span><span class="class">IP</span>
<span class="number">3</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596002251.</span><span class="class">IP</span>
<span class="number">4</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596101978.</span><span class="class">IP</span>
<span class="number">5</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596154066.</span><span class="class">IP</span>
<span class="number">6</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596157616.</span><span class="class">IP</span>
<span class="number">7</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596805876.</span><span class="class">IP</span>
<span class="number">8</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596527273.</span><span class="class">IP</span>
<span class="number">9</span>    <span class="number">6.422</span>    <span class="method">urn:</span>x-<span class="method">domain:</span>oreilly.<span class="method">com:</span><span class="method">product:</span><span class="number">9780596002961.</span><span class="class">IP</span></code></pre>
<h3>Query Syntax</h3>
<p>Stardog search is based on Lucene 4.2.0: we support all of the <a href="http://lucene.apache.org/java/3_4_0/queryparsersyntax.html">search
modifiers</a>
that Lucene supports, with the exception of fields.</p>
<ul>
<li>wildcards: <code>?</code> and <code>*</code></li>
<li>fuzzy: <code>~</code> and <code>~</code> with similarity weights (e.g. <code>foo~0.8</code>)</li>
<li>proximities: <code>"semantic web"~5</code></li>
<li>term boosting</li>
<li>booleans: <code>OR</code>, <code>AND</code>, <code>+</code>, <code>NOT</code>, and <code>-</code>.</li>
<li>grouping</li>
</ul>
<p>For a more detailed discussion, see the <a href="http://lucene.apache.org/java/3_3_0/queryparsersyntax.html">Lucene
docs</a>.</p>
</div>
    </div>
  </div>

  <div id="thefooter" class="container shaded">
    <div class="row">
      <div class="three columns">
        <p id="social">
        <a href="/"><i class="icon-home"></i></a>&nbsp;
        <a href="#" id="upaway" class="skip" gumby-easing="easeInOutQuad" gumby-goto="top" gumby-duration="2000">&uarr;</a>
        <!-- &nbsp;
        <a href="http://twitter.com/stardog_db"><i class="icon-twitter"></i></a>
        &nbsp;
        <a href=""><i class="icon-google-circles"></i></a> -->
        </p>
      </div>
      <div class="nine columns">
        
          <h4>This is <span id="title-masthead">Query, Add, Remove, Search</span>, a chapter in Stardog Docs 1.2.3.</h4>
        
      <p>For comments, questions, or to report problems with this page, visit the <a href="https://groups.google.com/a/clarkparsia.com/group/stardog/about">Stardog Support Forum</a>.</p>
      <p id="copywood">&copy;2010&ndash;2013 Clark &amp; Parsia LLC. <a href="http://creativecommons.org/licenses/by-sa/3.0/">Some rights reserved</a>.
      </div>
    </div>
  </div>

<script defer="defer"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script defer="defer"  src="/js/libs/gumby.js"></script><script defer="defer"  src="/js/libs/ui/gumby.fittext.js"></script><script defer="defer"  src="/js/libs/ui/gumby.fixed.js"></script><script defer="defer"  src="/js/libs/ui/gumby.navbar.js"></script><script defer="defer"  src="/js/libs/ui/gumby.retina.js"></script><script defer="defer"  src="/js/libs/ui/gumby.skiplink.js"></script><script defer="defer"  src="/js/libs/ui/gumby.tabs.js"></script><script defer="defer"  src="/js/libs/ui/gumby.toggleswitch.js"></script><script defer="defer"  src="/js/libs/gumby.init.js"></script><script defer="defer"  src="/js/plugins.js"></script><script defer="defer"  src="/js/main.js"></script>
